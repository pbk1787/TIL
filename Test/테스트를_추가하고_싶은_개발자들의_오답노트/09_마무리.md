## 테스트의 범위

- Right-BICEP
    - Right: 결과가 올바른가?
    - Boundary conditions: 경계 조건은 맞는가?
    - Inversion relationship: 역 관계를 검사할 수 있으면 검증해라
    - Cross check: 교차 검사할 수 있는가?
    - Error conditions: 오류/극한 상황에서도 테스트가 가능해야한다
    - Performerce: 성능



## 테스트 팁

### ParameterizedTest
- 동일 로직을 여러번 돌리고 싶을 때 사용
    - 테스트에는 논리 연산이 들어가지 않는 것이 좋다
- @MethodSource 라는 어노테이션을 사용하여 파라미터에 사용할 Source 메서드를 지정

### assertAll
- 중간에 실패해서 assert를 모두 돌릴 수 있는 방법
- 어떤 지점이 실패했는지 명확하게 알려줌

### 한 개의 테스트에는 하나만 테스트 해야한다.
- 한 개의 assert만을 가져야한다고 오해하기도 함
- when-then이 여러 개인 경우

### Thread.sleep
- 비동기 처리를 Thread sleep을 이용해서 테스트하면, 개발자 개별의 데스크탑 성능에 따라 테스트 결과가 달라질 수 있다
- 테스트가 비 결정적이 된다
- 대안: Awaitility 라이브러리 사용
    - time만큼 기다려보고 카운트가 목표까지 도달했는지 확인할 수 있게 해줌


### - FIRST 원칙
    
: 단위 테스트를 위한 원칙

- Fast
    
    : 단위 테스트는 빨라야 한다
    
    - 단위 테스트를 진행할 때 필요한 부분만 가져오는 등 속도를 줄이기 위해 다양한 노력을 해야 한다.
    
- Isolated/Independent
    
    : 단위 테스트는 독립적으로 수행되어야 한다.
    
    - 단위 테스트는 다른 단위 테스트에 영향을 받으면 안된다.
    - Mockito 등으로 가짜 객체를 주입해 의존성을 끊을 수 있다.

- Repeatable
    
    : 단위 테스트는 반복적으로 수행해도 결과가 같아야 한다.
    
    - 단위 테스트는 따로 지정하지 않는 한 순서를 보장하지 않는다.
    - 실행 순서에 영향이 가게 테스트를 구성하면 안된다.

- Self-validating
    
    : 단위 테스트는 스스로 검증할 수 있어야 한다.
    
    - 개발자가 콘솔 로그를 보며 값을 확인하는 것이 아니라 단위 테스트 스스로 검증하고 판단해야한다.
    - 예시로 JUnit에서 제공하는 assertThat같은 여러 테스트 메서드를 통해 스스로 확인해야 한다.

- Timely
    
    : 단위 테스트는 필요할 때 미루지 말고 적시에 작성되어야 한다.
    
    - 여기서 적시는 테스트 하려는 코드 구현 이전을 말한다.
    - 즉, 테스트코드는 **실제 코드 구현보다 먼저 작성되어야한다**. 이는 TDD(Test-driven-development)로 이어진다.
    - TDD 관련 장단점과 필요성에 대해서는 개발자마다 생각이 다르다.
    - 따라서, 이 원칙은 TDD 한에서만 적용된다.